"use strict";angular.module("app.helpers",[]).directive("t3bsSelect2",["$timeout",function(e){return{restrict:"E",scope:{select2Model:"=",select2Callback:"=",source:"="},transclude:!0,template:'<select class="t3bsSelect2" style="width: 100%"><option ng-repeat="c in source" value="{{ c[idv] }}">{{ c[valuev] }}</option></select>',replace:!0,link:function(t,n,o){function a(){n.select2Initialized&&e(function(){$(n).trigger("change"),r()})}function r(){return t.select2Model?void(n.idOpt!=t.select2Model[t.idv]&&$(n).val(t.select2Model[t.idv]).trigger("change")):void i()}function l(o,a){n.idOpt=o.params.data[t.idv]||a,e(function(){t.select2Model=s(n.idOpt,t.source),t.select2Callback&&t.select2Callback(t.select2Model)})}function s(e,n){for(var o=0;o<n.length;o++)if(n[o][t.idv]==e)return n[o]}function i(){t.source&&t.source.length&&(t.select2Model||(t.select2Model=t.source[0]))}t.idv=o.select2Value||"id",t.valuev=o.select2Display||"name",e(function(){$(n).select2({theme:"bootstrap"}),n.select2Initialized=!0,t.$watch("source",a),t.$watch("select2Model",r)}),$(n).on("select2:select",l)}}}]).directive("t3bsSelect2Multiple",["$timeout",function(e){return{restrict:"E",scope:{select2Model:"=",source:"="},transclude:!0,template:'\n      <select class="t3bsSelect2 select2-multiple" multiple="" style="width: 100%">\n        <option ng-repeat="c in source" value="{{ c[idv] }}" ng-bind="c[valuev]"></option>\n      \'</select>',replace:!0,link:function(t,n,o){function a(){n.select2Initialized&&e(function(){$(n).trigger("change"),r()})}function r(){return t.select2Model?n.select2Initialized?void $(n).val(s(t.select2Model)).trigger("change"):void setTimeout(r,1e3):void 0}function l(o,a){n.idOpt=o.params.data[t.idv],e(function(){var e=null;(e=i(n.idOpt,t.select2Model))?t.select2Model.splice(t.select2Model.indexOf(e),1):(t.select2Model||(t.select2Model=[]),t.select2Model.push(i(n.idOpt,t.source)))})}function s(e){for(var n=[],o=0;o<e.length;o++)n.push(e[o][t.idv]);return n}function i(e,n){if(!n)return!1;for(var o=0;o<n.length;o++)if(n[o][t.idv]==e)return n[o];return!1}t.idv=o.select2Value||"id",t.valuev=o.select2Display||"name",e(function(){$(n).select2({theme:"bootstrap"}),n.select2Initialized=!0,t.$watch("source",a),t.$watch("select2Model",r)}),$(n).on("select2:select",l),$(n).on("select2:unselect",l)}}}]).directive("inputSrc",function(){return{restrict:"A",scope:{file:"=inputSrc"},link:function(e,t,n){function o(){FileReader?!function(){var t=new FileReader;t.onload=function(){n.$set("src",t.result)},t.readAsDataURL(e.file)}():console.warn("Update your f*** browser")}e.$watch("file",function(e){if(e)o(),t.show();else{if(n.inputSrcError)return void n.$set("src",n.inputSrcError);t.hide()}})}}}),angular.module("app.helpers").directive("t3bsGoogleplace",[function(){return{require:"ngModel",scope:{ngModel:"=",details:"=?"},link:function(e,t,n,o){var a={types:[],componentRestrictions:{}};setTimeout(function(){e.gPlace=new google.maps.places.Autocomplete(t[0],a),google.maps.event.addListener(e.gPlace,"place_changed",function(){e.$apply(function(){e.details=e.gPlace.getPlace(),o.$setViewValue(t.val())})})},800)}}}]),angular.module("app.helpers").directive("validNumber",function(){return{require:"?ngModel",link:function(e,t,n,o){o&&(o.$parsers.push(function(e){var t=e.replace(/[^0-9]+/g,"");return e!==t&&(o.$setViewValue(t),o.$render()),t}),t.bind("keypress",function(e){32===e.keyCode&&e.preventDefault()}))}}}),angular.module("app.restaurants",[]).service("RestaurantsService",["$http","CONFIG",function(e,t){this.url=t.API_URL+"restaurants/",this.getAll=function(t){return e.get(this.url).then(t)},this.create=function(t,n){console.log("servicio"),console.log(t);var o={url:this.url,data:t,method:"POST",transformRequest:angular.identity,headers:{"Content-Type":void 0}};return e(o).then(n)},this.update=function(t,n){var o={url:this.url+t.get("id"),data:t,method:"POST",transformRequest:angular.identity,headers:{"Content-Type":void 0}};return e(o).then(n)},this.destroy=function(t,n){return e["delete"](this.url+t).then(n)}}]),angular.module("app.restaurants").controller("RestaurantsCtrl",["$scope","RestaurantsService","ProductsService","DTOptionsBuilder","DTColumnDefBuilder","Notification","$timeout","CONFIG",function(e,t,n,o,a,r,l,s){e.companies=[],e.products=[],e.company=null,e.logo=null,e.isEdit=!1,e.baseUrl=s.PUBLIC_URL,e.dtOptions=o.newOptions().withOption("responsive",!0),e.dtColumns=[a.newColumnDef(0),a.newColumnDef(1),a.newColumnDef(2),a.newColumnDef(3)],l(function(){$("#companyFormModal").on("hidden.bs.modal",function(){e.company=null,e.logo=null})}),t.getAll(function(t){e.companies=t.data,console.log("compaÃ±ias"),console.log(e.companies)}),n.getAll(function(t){e.products=t.data}),e.openForm=function(t,n){console.log("sdf"),t?(e.isEdit=!0,e.company=t,e.company.index=n,console.log(e.company)):e.isEdit=!1,$("#companyFormModal").modal("show")};e.saveCompany=function(n){console.warn(n),e.isEdit?(n.append("_method","PUT"),t.update(listProduct,function(t){console.log(t),r.success("Editado correctamente"),e.companies[e.company.index]=t.data.company,e.isEdit=!1,$("#companyFormModal").modal("hide")})):t.create(listProduct,function(t){console.log(t),e.companies.push(t.data.company),$("#companyFormModal").modal("hide"),r.success("Creado correctamente")})},e.openDeleteConfirm=function(t,n){e.company=t,e.company.idx=n,$("#companyDeleteModal").modal("show")},e.deleteCompany=function(){console.log(e.company),t.destroy(e.company.id,function(t){e.companies.splice(e.company.idx,1),$("#companyDeleteModal").modal("hide"),e.company=null,r.success("Borrado correctamente")})},e.addLogo=function(){$("#file").click()},e.selectLogo=function(t){e.logo=t[0],e.$apply()}}]),angular.module("app.products",[]).service("ProductsService",["$http","CONFIG",function(e,t){this.url=t.API_URL+"products/",this.getAll=function(t){return e.get(this.url).then(t)},this.create=function(t,n){return e.post(this.url,t).then(n)},this.update=function(t,n){return e.put(this.url+t.id,t).then(n)},this.destroy=function(t,n){return e["delete"](this.url+t).then(n)}}]),angular.module("app.products").controller("ProductsCtrl",["$scope","ProductsService","Notification","$timeout",function(e,t,n,o){e.productForm={},e.products=[],e.product=null,e.isEdit=!1,t.getAll(function(t){e.products=t.data}),e.openForm=function(t,n){t?(e.isEdit=!0,e.product=t,e.product.index=n):(e.isEdit=!1,e.product={}),$("#productFormModal").modal("show")},e.saveProduct=function(o,a){e.isEdit?($("#productFormModal").modal("hide"),t.update(o,function(t){n.success("Editado correctamente"),e.products[e.product.index]=t.data.product,e.product=null,e.isEdit=!1})):($("#productFormModal").modal("hide"),t.create(o,function(t){e.products.push(t.data.product),e.product=null,n.success("Creado correctamente")}))},e.openDeleteConfirm=function(t,n){e.product=t,e.product.idx=n,$("#productDeleteModal").modal("show")},e.deleteProduct=function(){$("#productDeleteModal").modal("hide"),t.destroy(e.product.id,function(t){e.products.splice(e.product.idx,1),e.product=null,n.success("Borrado correctamente")})}}]),angular.module("app.home",[]).service("HomeService",["$http","CONFIG",function(e,t){var n=t.API_URL+"dashboard/";this.handleError=function(e){console.warn(e)},this.get=function(t,o,a){return e.get(n).then(t,o)}}]),angular.module("app.home").directive("t3bNav",function(){return{scope:{},controller:["$location",function(e){var t=this;t.checkPath=function(t){return-1!=e.path().indexOf(t)}}],controllerAs:"ctrl",template:' \n      <!-- Left side column. contains the sidebar -->\n      <aside class="main-sidebar">\n        <!-- sidebar: style can be found in sidebar.less -->\n        <section class="sidebar">\n          <ul class="sidebar-menu">\n            <li class="header">MENU</li>\n            <li ng-class="{active: ctrl.checkPath(\'/inicio\')}">\n              <a href="/home"><i class="fa fa-fw fa-home"></i> <span>Inicio</span></a>\n            </li>\n\n            <li ng-class="{active: ctrl.checkPath(\'/restaurantes\')}">\n              <a href="/restaurantes"><i class="fa fa-fw fa-university"></i> <span>Restaurantes</span></a>\n            </li>\n\n            <!--@if ($tipoUsuario == \'ADMINISTRADOR\')-->\n\n            <li ng-class="{active: ctrl.checkPath(\'/productos\')}">\n              <a href="/productos"><i class="fa fa-fw fa-gift"></i> <span>Productos</span></a>\n            </li>\n            \n          </ul>\n        </section>\n        <!-- /.sidebar -->\n      </aside>\n    '}}),angular.module("app.home").controller("MainCtrl",["$scope","$rootScope","AUTH_EVENTS","CONFIG","$http","jwtHelper","$interval",function(e,t,n,o,a,r,l){console.warn("main ctrl"),e.loggedUser=null,e.expandedMenu=!0,e.setCurrentUser=function(t){e.loggedUser=t}}]),angular.module("app.home").directive("t3bHeader",function(){return{scope:{},controller:["$rootScope","$scope",function(e,t){var n=this;n.logout=e.logout,n.loggedUser=t.$parent.loggedUser;var o=$.AdminLTE.options.screenSizes;$(".content-wrapper").click(function(){$(window).width()<=o.sm-1&&$("body").hasClass("sidebar-open")&&$("body").removeClass("sidebar-open")}),n.toggleMenu=function(){$(window).width()>o.sm-1?$("body").hasClass("sidebar-collapse")?$("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):$("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").hasClass("sidebar-open")?$("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):$("body").addClass("sidebar-open").trigger("expanded.pushMenu")}}],controllerAs:"ctrl",template:' \n      <header class="main-header">\n        <!-- Logo -->\n        <a href="/" class="logo">\n          <!-- mini logo for sidebar mini 50x50 pixels -->\n          <span class="logo-mini"><b>SR</b></span>\n          <!-- logo for regular state and mobile devices -->\n          <span class="logo-lg"><b>Search</b> <b>R</b>estaurant</span>\n        </a>\n        <!-- Header Navbar: style can be found in header.less -->\n        <nav class="navbar navbar-static-top text-center" role="navigation">\n          <!-- Sidebar toggle button-->\n          <a href="javascript:void(0);" ng-click="ctrl.toggleMenu()" class="sidebar-toggle" data-toggle="offcanvas" role="button">\n            <span class="sr-only">Toggle navigation</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n          </a>\n          <div class="navbar-custom-menu">\n            <ul class="nav navbar-nav">\n              <li class="dropdown user user-menu">\n                <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown">\n                  <img src="https://randomuser.me/api/portraits/men/21.jpg" class="user-image" alt="User Image">\n                  <span class="hidden-xs">{{ ctrl.loggedUser.first_name }}</span>\n                </a>\n                <ul class="dropdown-menu">\n                  <!-- User image -->\n                  <li class="user-header">\n                    <img src="https://randomuser.me/api/portraits/men/21.jpg" class="img-circle" alt="User Image">\n                    <p>\n                      {{ ctrl.loggedUser.first_name +\' \'+ctrl.loggedUser.last_name }}\n                    </p>\n                    <p>\n                      {{ ctrl.loggedUser.email }}\n                    </p>\n                  </li>\n                  <!-- Menu Footer-->\n                  <li class="user-footer">\n                    <div class="pull-left">\n                      <a href="/perfil" class="btn btn-default btn-flat"><i class="fa fa-user"></i> Perfil</a>\n                    </div>\n                    <div class="pull-right">\n                      <button ng-click="ctrl.logout()" class="btn btn-default btn-flat">\n                        <i class="fa fa-sign-out"></i> Salir\n                      </button>\n                    </div>\n                  </li>\n                </ul>\n              </li>\n            </ul>\n          </div>\n        </nav>\n      </header>\n    '}}),angular.module("app.home").directive("t3bFooter",function(){return{scope:{},controller:["CONFIG",function(e){this.version=e.version}],controllerAs:"ctrl",template:' \n    <footer class="main-footer">\n      <div class="pull-right hidden-xs">\n        <b>Version</b> 3.0.1\n      </div>\n      <strong>Developed by &copy; 2016 {{ ctrl.version }} <a href="http://the3ballsoft.com">The3ballsoft</a>.</strong>.\n    </footer>\n    '}}),angular.module("app.home").controller("HomeCtrl",["$scope",function(e){console.info("home Ctrl works"),e.dashboard={restaurant:30,products:34,companies:31,old_orders:209}}]),angular.module("app",["ngRoute","templates","angular-loading-bar","datatables","angularMoment","ui-notification","ng-currency","angular-jwt","app.helpers","app.home","app.restaurants","app.products"]),angular.module("app").run(["$rootScope","$location","amMoment",function(e,t,n){function o(){window.location.href="logout"}n.changeLocale("es"),e.logout=function(){o()},e.goTo=function(e){t.path(e)}}]),angular.module("app").config(["$routeProvider","$locationProvider",function(e,t){e.when("/admin-home",{controller:"HomeCtrl",templateUrl:"app/home/home.html"}).when("/restaurantes",{controller:"RestaurantsCtrl",templateUrl:"app/restaurants/restaurants.html"}).when("/productos",{controller:"ProductsCtrl",templateUrl:"app/products/products.html"}).otherwise({redirectTo:"/admin-home"}),t.html5Mode(!0)}]),angular.module("app").constant("CONFIG",{ROOT_URL:"https://srestaurants.herokuapp.com/",API_URL:"https://srestaurants.herokuapp.com/api/"}).constant("AUTH_EVENTS",{notAuthenticated:"auth-not-authenticated",notAuthorized:"auth-not-authorized",tokenExpired:"token-expired",logout:"auth-logout"}),angular.module("app").config(["cfpLoadingBarProvider",function(e){e.includeBar=!0}]).config(["NotificationProvider",function(e){e.setOptions({delay:2e3,startTop:60,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"right",positionY:"top"})}]);
//# sourceMappingURL=../maps/bundle.min.js.map
